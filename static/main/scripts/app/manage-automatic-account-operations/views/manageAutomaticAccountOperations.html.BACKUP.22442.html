<div class="page-container automatic-account-operations-page-container">
    <div class="automatic-accaount-operations-header-container" ng-hide="isFirstTimeLoad">
        <h3 class="money-transfer-header" translate>
            Automatic Account Operations
        </h3>
    </div>

    <div class="automatic-account-operations-controls-container">
        <div class="accounts-select-container">
            <select type="button" class="form-control"
                name="currentUserAccount"
                ng-model="currentUserAccount"
                ng-options="account.id + (' (Balance: '|translate) + account.balance
                    + ' ' + getCurrencyById(account.currency).code
                    + ')' for account in userAccounts"
                ng-required="true">
            </select>
        </div>
        <div class="create-new-automatic-account-operation-btn-container">
            <button class="btn btn-primary" ng-click="createAutomaticAccountOperation()">
                Create Automatic Account Operation
            </button>
        </div>
    </div>

    <div class="automatic-account-operations-list-container" ng-hide="isFirstTimeLoad">
        <div class="automatic-account-operations-list-header-container">
            <div class="timestamp-container">
                <span class="timestamp" translate>
                    Automatic account operations state is actual for {{stateTimestamp | unixtime | date:'MMM, dd, yyyy HH:mm:ss Z'}}
                </span>
            </div>

            <div class="refresh-button-container">
                <a class="refresh-button" ng-click="reloadAutomaticAccontOperationsInformation()">
                    <span class="glyphicon glyphicon-refresh" ng-class="{ 'fa-spin': isBusy}"></span>
                </a>
            </div>
        </div>

        <div class="automatic-account-operations-list-header-container" ng-hide="automaticAccountOperations.length == 0">
            <div class="automatic-account-operations-list-header">
                <div class="operation-type-header-container col-xs-2">
                    <span class="operation-type-header" translate>
                        Operation Type
                    </span>
                </div>
                <div class="operation-start-date-header-container col-xs-2">
                    <span class="operation-start-date-header" translate>
                        Operation Start Date
                    </span>
                </div>
                <div class="operation-period-header-container col-xs-1">
                    <span class="operation-period-header" translate>
                        Operation Period
                    </span>
                </div>
                <div class="operation-info-header-container col-xs-4">
                    <span class="operation-info-header" translate>
                        Operation Info
                    </span>
                </div>
                <div class="operation-amount-header-container col-xs-1">
                    <span class="operation-amount-header" translate>
                        Operation Amount
                    </span>
                </div>
                <div class="edit-operation-header-container col-xs-1">
                </div>
                <div class="delete-operation-header-container col-xs-1">
                    <span class="remove-operation-header" translate>
                        Remove
                    </span>
                </div>
            </div>
        </div>

        <ul class="automatic-account-operations-list" ng-hide="automaticAccountOperations.length == 0">
            <li class="automatic-account-operation-container" ng-repeat="automaticAccountOperation in automaticAccountOperations
                | slice: (currentPageNumber - 1)*itemsPerPage : currentPageNumber*itemsPerPage">
                <div class="operation-type-container col-xs-2">
                    <span class="operation-type" translate>
                        {{automaticAccountOperation.type}}
                    </span>
                </div>
                <div class="operation-start-date-container col-xs-2">
                    <span class="operation-start-date" translate>
                        {{automaticAccountOperation.startDate | unixtime | date:'MMM, dd, yyyy HH:mm:ss Z'}}
                    </span>
                </div>
                <div class="operation-period-container col-xs-1">
                    <span class="operation-period" translate>
                        {{automaticAccountOperation.period}}
                    </span>
                </div>
                <div class="operation-info-container col-xs-4">
                    <span class="operation-info">
                        <div class="erip-payment" ng-show="automaticAccountOperation.type == 'erip'">
                            <div class="erip-payment-name-container">
                                <div class="label" translate>
                                    Erip payment name:
                                </div>
                                <div class="erip-payment-name">
                                    {{automaticAccountOperation.paymentId}}
                                </div>
                            </div>
                            <div class="erip-payment-fields-list-container">
                                <div class="erip-payment-fields-list-header-container">
                                    <span class="erip-payment-fields-list-header" translate>
                                        Payment fields
                                    </span>
                                </div>

                                <ul class="erip-payment-fields-list">
                                    <li class="erip-payment-field-container"
                                        ng-repeat="(key, value) in automaticAccountOperation.paymentFields">
                                        <div class="label">
                                            {{key}}
                                        </div>
                                        <div class="erip-payment-field">
                                            {{value}}
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="money-transfer" ng-show="automaticAccountOperation.type == 'direct'">
                            <div class="recipient-account-number-container">
                                <div class="label" translate>
                                    Recipient account number:
                                </div>
                                <div class="recipient-account-number">
                                    {{automaticAccountOperation.recipientAccountId}}
                                </div>
                            </div>
                        </div>
                    </span>
                </div>
                <div class="operation-amount-container col-xs-1">
                    <span class="operation-amount">
                        {{automaticAccountOperation.amount}}
                    </span>
                </div>
                <div class="edit-operation-container col-xs-1">
<<<<<<< HEAD
                    <span class="edit-operation" translate>
=======
                    <a class="edit-operation" title="Erit operation">
>>>>>>> Added create and delete logic for automatic account operations
                        Edit
                    </a>
                </div>
                <div class="delete-operation-container col-xs-1">
                    <a class="glyphicon glyphicon-remove-circle"
                        title="Remove operation"
                        ng-click="removeAutomaticAccountOperation(currentUserAccount.id, automaticAccountOperation.id)">
                    </a>
                </div>
            </li>
        </ul>

        <div class="no-automatic-account-operations-presented-container" ng-show="automaticAccountOperations.length == 0 && !isBusy">
            <h3 translate>You have no automatic account operations for selected account yet :(</h3>
        </div>

        <div class="automatic-account-operations-list-paging-container"
            ng-hide="automaticAccountOperations.length / itemsPerPage <= 1">
            <pagination class="pagination-sm"
                ng-model="currentPageNumber"
                total-items="automaticAccountOperations.length"
                items-per-page="itemsPerPage"
                max-size="maxPaginationSize"
                boundary-links="true"
                previous-text="&lsaquo;"
                next-text="&rsaquo;"
                first-text="&laquo;"
                last-text="&raquo;">
            </pagination>
        </div>
    </div>

    <custom-spinner ng-show="isBusy"></custom-spinner>
</div>