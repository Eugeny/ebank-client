<div preloader data="workspace.id" text="Loading workspace">
    <h3><i class="fa fa-folder"></i> [[workspace.name]]</h3>

    <tabset>
        <tab heading="General">
            <br/>
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Name</label>
                    <div class="col-sm-10">
                        <label class="form-control-static">[[workspace.name]]</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Project</label>
                    <div class="col-sm-10">
                        <label class="form-control-static">[[project.name]]</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Volume</label>
                    <div class="col-sm-10">
                        <label class="form-control-static">[[workspace.volume.name]]</label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Move to a project</label>
                    <div class="col-sm-5">
                        <select class="form-control" ng:model="moveToTarget" ng:options="x.resource_uri as x.name for x in projects" ng:change="moveTo(moveToTarget)"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Description</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" ng:model="workspace.description" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Long description</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" ng:model="workspace.long_description"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Write access group</label>
                    <div class="col-sm-5">
                        <select class="form-control" ng:options="x.resource_uri as x.name for x in groups" ng:model="workspace.rw_access_group"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Read-only access group</label>
                    <div class="col-sm-5">
                        <select class="form-control" ng:options="x.resource_uri as x.name for x in groups" ng:model="workspace.ro_access_group"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Emulation</label>
                    <div class="col-sm-10">
                        <span ng:model="workspace.emulate_avid" class="form-control" checkbox text="AVID workspace"></span>
                    </div>
                </div>
                <div class="form-group" ng:show="system.components.media">
                    <label class="col-sm-2 control-label"></label>
                    <div class="col-sm-10">
                        <a ng:click="startMediaScan()" class="btn btn-default"><i class="fa fa-refresh"></i> Rescan media library</a>
                        &nbsp;
                        <a ng:click="createMediaRoot()" ng:hide="mediaRoot" class="btn btn-default"><i class="fa fa-plus"></i> Create media root</a>
                        <a href="/media/root/[[mediaRoot.id]]" ng:show="mediaRoot" class="btn btn-default"><i class="fa fa-folder"></i> Edit media root</a>
                    </div>
                </div>
            </div>
        </tab>

        <tab heading="Sharing">
            <br/>
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Share using</label>
                    <div class="col-sm-10">
                        <span ng:model="workspace.share_nfs" class="form-control" checkbox text="NFS"></span>
                        <br/>
                        <span ng:model="workspace.share_afp" class="form-control" checkbox text="AFP"></span>
                        <br/>
                        <div class="help-block">
                            <label class="label label-warning" ng:show="workspace.share_afp && workspace.sharing_hidden">
                                <i class="fa fa-warning"></i> AFP can't hide your workspace from the share list!
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">Sharing options</label>
                    <div class="col-sm-10">
                        <span ng:model="workspace.read_only" class="form-control" checkbox text="Read-only"></span>
                        <br/>
                        <span ng:model="workspace.sharing_require_login" class="form-control" checkbox text="Require login"></span>
                        <br/>
                        <span ng:model="workspace.sharing_hidden" class="form-control" checkbox text="Hidden"></span>
                    </div>
                </div>
            </div>
        </tab>
        <tab heading="Advanced">
            <br/>
            <div class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-2 control-label">Mount on Windows as</label>
                    <div class="col-sm-3">
                        <select ng:model="workspace.win_protocol" class="form-control">
                            <option value="disk">Network drive</option>                        
                            <option value="unc">Network folder</option>                        
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Mount on Mac using</label>
                    <div class="col-sm-3">
                        <select ng:model="workspace.mac_protocol" class="form-control">
                            <option value="nfs">NFS</option>                        
                            <option value="afp">AFP</option>                        
                            <option value="smb">SMB</option>                        
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">RAID group</label>
                    <div class="col-sm-6" ng:hide="workspace.affinity">
                        <select class="form-control" ng:model="workspace.affinity" 
                        ng:options="x.affinity as x.affinity for x in snfs_status[storage_status.volumes[workspace.volume.id].node.id].stripegroups"
                        />
                        <span class="help-block">
                            <span class="label label-warning"><i class="fa fa-warning"></i> WARNING</span>
                            Once set, RAID group can't be changed.
                        </span>
                    </div>
                    <label class="col-sm-2 form-control-static" ng:show="workspace.affinity">[[workspace.affinity]]</label>
                </div>
                <div class="form-group">
                    <label class="col-xs-2 control-label">Soft quota</label>
                    <div class="col-xs-2">
                        <input type="number" class="form-control" ng:model="workspace.quota_size_soft" />
                    </div>
                    <label class="col-xs-2 form-control-static">GB</label>
                </div>
                <div class="form-group">
                    <label class="col-xs-2 control-label">Hard quota</label>
                    <div class="col-xs-2">
                        <input type="number" class="form-control" ng:model="workspace.quota_size_hard" />
                    </div>
                    <label class="col-xs-2 form-control-static">GB</label>
                </div>
            </div>  
        </tab>
    </tabset>

    <div class="sticky-panel">
        <a ng:click="save()" class="btn btn-primary">
            <i class="fa fa-check"></i>
            Save
        </a>
        <!--a ng:click="delete()" class="btn btn-default">
            <i class="fa fa-trash-o"></i>
            Delete
        </a-->
    </div>
</div>